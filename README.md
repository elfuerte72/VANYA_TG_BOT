# Телеграм‑бот для расчёта КБЖУ

## Описание проекта

Телеграм-бот для расчёта персональных показателей КБЖУ (калории, белки, жиры, углеводы) по формуле Бенедикта и формирования детального плана питания на 3–4 приёма пищи. Бот доступен только для подписчиков определённого фитнес-канала и предоставляет расчёт единожды для каждого пользователя.

## Функциональность

- Проверка подписки пользователя на канал
- Сбор персональных данных через диалоговый интерфейс
- Расчёт КБЖУ по формуле Бенедикта с учётом уровня активности
- Формирование плана питания с распределением нутриентов по приёмам пищи
- Сохранение данных пользователей и предотвращение повторных расчётов

## Технологический стек

- **Язык программирования:** Python 3.10+
- **Фреймворк для бота:** aiogram 3.x
- **База данных:** SQLAlchemy + SQLModel (SQLite)
- **Генерация рекомендаций:** OpenAI API (GPT-4.1 nano)
- **Другие инструменты:**
  - pydantic для валидации данных
  - python-dotenv для управления конфигурацией
  - loguru для логирования

## Установка и запуск

### Предварительные требования

- Python 3.10 или выше
- Poetry (менеджер пакетов)

### Установка

1. Клонировать репозиторий:
   ```bash
   git clone <url-репозитория>
   cd vanyba_telegramm
   ```

2. Установить зависимости с помощью Poetry:
   ```bash
   poetry install
   ```

3. Создать файл .env на основе шаблона:
   ```bash
   cp .env.example .env
   ```

4. Заполнить переменные окружения в файле .env:
   - `BOT_TOKEN` - токен Telegram-бота (получить у @BotFather)
   - `OPENAI_API_KEY` - ключ API OpenAI
   - `DB_PATH` - путь к файлу базы данных SQLite
   - `LOG_LEVEL` - уровень логирования (INFO, DEBUG, и т.д.)

### Запуск

```bash
poetry run python src/main.py
```

## Структура проекта

```
├── src/                    # Исходный код
│   ├── __init__.py
│   ├── main.py             # Точка входа
│   ├── config.py           # Конфигурация из .env
│   ├── bot/                # Логика бота
│   ├── db/                 # Модели данных и взаимодействие с БД
│   ├── services/           # Бизнес-логика и внешние сервисы
│   └── utils/              # Вспомогательные функции
├── tests/                  # Тесты
├── .env.example            # Шаблон переменных окружения
├── pyproject.toml          # Конфигурация Poetry и инструментов
└── README.md               # Документация проекта
```

## Тестирование

```bash
poetry run pytest
```

## Лицензия

Данный проект предназначен для использования только владельцем фитнес-канала и распространяется согласно условиям лицензии, указанной в файле LICENSE.
